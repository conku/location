"use strict";function qorInitMapAssets(o){$(o).each(function(){var o=$(this),t=o.data(),i=t.locationMapsource,n=t[i+"Apikey"],e="qor_map_"+i,a=void 0;$("#"+e).length||("baidu"===i?a="//api.map.baidu.com/api?v=2.0&ak="+n+"&callback=qorInitBaiduMap":"google"===i?a="//maps.googleapis.com/maps/api/js?key="+n:console.log("QOR only support baidu or google Map, please make sure your Map config is correct!"),qorLoadMapScript(a,e))})}function qorInitBaiduMap(){$('[data-toggle="qor.location"]').each(function(){new QorLocation($(this)).initBaiduMap()})}function qorLoadMapScript(o,t){var i=document.createElement("script");i.src=o,i.id=t,document.body.appendChild(i)}function QorLocation(o,t){this.$element=$(o),this.options=$.extend({},QorLocation.DEFAULTS,$.isPlainObject(t)&&t),this.init()}QorLocation.prototype={constructor:QorLocation,init:function(){var o=this.$element.find("[data-location-role]"),t=this,i=void 0;o.each(function(){i=$(this).data("location-role"),t["$"+i]=$(this)}),this.bind()},bind:function(){this.$reverseGeocode.on("click",this.getmarkerPosition.bind(this))},unbind:function(){},initBaiduMap:function(){var o=new BMap.Map(this.$element.find(".qor__location-map")[0]),t=Number(this.$latitude.val()),i=Number(this.$longitude.val()),n=new BMap.Point(i,t),e=this;if(o.centerAndZoom(n,15),o.enableScrollWheelZoom(),0===t&&0===i){(new BMap.Geolocation).getCurrentPosition(function(t){if(this.getStatus()==BMAP_STATUS_SUCCESS){var i=new BMap.Marker(t.point);o.addOverlay(i),o.panTo(t.point),i.enableDragging(),e.marker=i,console.log("您的位置："+t.point.lng+","+t.point.lat)}else console.log("failed"+this.getStatus())},{enableHighAccuracy:!0})}else{console.log(i),console.log(t);var a=new BMap.Marker(n);o.addOverlay(a),a.enableDragging(),this.marker=a}},getmarkerPosition:function(){console.log(this.marker.getPosition()),this.getAddressFromPosition(this.marker.getPosition())},getAddressFromPosition:function(o){(new BMap.Geocoder).getLocation(new BMap.Point(o.lng,o.lat),function(o){o&&console.log(o)})}},$(function(){var o='[data-toggle="qor.location"]';qorInitMapAssets(o),$(document).on("enable.qor.location",function(){qorInitMapAssets(o)})});